<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Jupyter - Metagenome tutorial</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">Metagenome tutorial</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Jupyter</a>
                    </li>
                
                
                
                    <li >
                        <a href="../qc/">QC</a>
                    </li>
                
                
                
                    <li >
                        <a href="../assembly/">Assembly</a>
                    </li>
                
                
                
                    <li >
                        <a href="../binning/">Binning</a>
                    </li>
                
                
                
                    <li >
                        <a href="../anvio/">Visualization</a>
                    </li>
                
                
                
                    <li >
                        <a href="../hic/">HiC</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../qc/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#setting-up-a-working-environment-jupyter">Setting up a working environment (Jupyter)</a></li>
        
            <li><a href="#launch-a-server-via-amazon-web-services-ec2">Launch a server via Amazon Web Services EC2</a></li>
        
            <li><a href="#log-in-and-launch-jupyter">Log in and launch Jupyter</a></li>
        
            <li><a href="#connect-to-the-jupyter-web-interface">Connect to the Jupyter web interface</a></li>
        
            <li><a href="#other-software">Other software</a></li>
        
            <li><a href="#ways-to-get-started-without-using-amazon-web-services">Ways to get started without using Amazon Web Services</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="setting-up-a-working-environment-jupyter">Setting up a working environment (Jupyter)</h1>
<p>In these tutorials we will work in a Jupyter notebook server environment.
Jupyter is a versatile web interface system for data analysis, supporting work in languages such as Python and R, as well as the unix command-line.
If you are working through this tutorial in one of The Gene School workshops we will provide a pre-configured Jupyter server for you to use and there is no need to carry out the setup process described on this page.</p>
<h2 id="launch-a-server-via-amazon-web-services-ec2">Launch a server via Amazon Web Services EC2</h2>
<p>First, either log in or sign up for AWS and navigate to to the EC2 section.
Then select the option to launch a new instance. We will use the Ubuntu 18.04 LTS base image in this example.
As you continue to click through the instance configuration details, there are two important settings that need to be changed from defaults: (1) the disk volume size, which should be set to 500GB or more to give ample space for metagenomic datasets (note that this will incur costs), and (2) the security groups settings. In the security groups, you will need to add access to TCP port 8888 for the IP address from which you'll be connecting to the servers. If you don't know your source IP range then this can be set to <code>0.0.0.0/0</code> but note the that this will enable the whole world to connect to the server and there is a security risk, even if the Jupyter server is password or token protected.</p>
<p>If this is the first time you've used AWS you will need to generate and save an ssh key that will be used to log into the VMs. Keep this in a safe place. It will need to be made read only to the user account before it can be used with ssh, e.g. <code>chmod 400 my_aws_key.pem</code></p>
<h2 id="log-in-and-launch-jupyter">Log in and launch Jupyter</h2>
<p>Having started up an AWS instance you are now ready to log in and install Jupyter.
The process is fairly straightforward. First ssh into the instance: <code>ssh -i my_aws_key.pem ubuntu@XX.XX.XX.XX</code> where XX.XX.XX.XX is the public IP address shown in the AWS EC2 console for the VM you have launched.
Once logged in there are a few steps to installing the Jupyter server. First download and install anaconda:</p>
<pre><code>wget https://repo.anaconda.com/archive/Anaconda3-2018.12-Linux-x86_64.sh
bash Anaconda3-2018.12-Linux-x86_64.sh
</code></pre>

<p>Be sure to answer <code>yes</code> to the license question and the question about installing the configuration to the <code>.bashrc</code> file.</p>
<p>Now we're ready to launch a jupyter server:</p>
<pre><code>source .bashrc
jupyter lab --no-browser --ip 0.0.0.0 --LabApp.token=112233445566778899
</code></pre>

<p>IMPORTANT: replace the string of numbers <code>112233445566778899</code> with your own string -- this is the secret key that will allow you (and only you) to connect to your jupyter server and run commands, so you want something that neither human nor robot will guess. Hexadecimal (lowercase) values are ok here too.</p>
<h2 id="connect-to-the-jupyter-web-interface">Connect to the Jupyter web interface</h2>
<p>We're finally ready to connect to the web interface. To do so simply point your browser at <code>XX.XX.XX.XX:8888</code> where XX.XX.XX.XX is again the public IP address of the VM that you've launched in AWS. 8888 is the TCP port number that Jupyter listens on by default, and we added a special security rule to open this port when creating the VM in AWS (remember?). If you missed that step, don't worry, it's possible to go into the EC2 dashboard and update the security settings to open port 8888. Assumming everything has worked you'll arrive at a Jupyter page asking for the security token. This is where you provide the super secret number that you selected above. And that's it, you're ready to use Jupyter!</p>
<h2 id="other-software">Other software</h2>
<p>Some of the steps in the tutorial use <a href="https://singularity.lbl.gov">singularity</a> to run analysis tools.
To carry out those steps singularity will need to be installed on the machine:</p>
<pre><code>sudo apt install -y singularity-container
</code></pre>

<h2 id="ways-to-get-started-without-using-amazon-web-services">Ways to get started without using Amazon Web Services</h2>
<p>Not everyone will have access to Amazon EC2, or may not have access all the time.
Another alternative is to run a Linux VM locally, provided that you have access to a computer with enough RAM and free storage space.
One way to do this is to install VirtualBox on your machine, and then obtain an Ubuntu 18.04 LTS image to start up.
This tutorial won't cover how to do this but don't worry, it's not hard.
Plenty of people have documented how to do it.
Look around, <a href="https://duckduckgo.com">duckduckgo</a> is your friend.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
